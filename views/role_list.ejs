<%-include('./admin_header.ejs')%>
<%-include('./admin_left_menu_bar.ejs')%>

<style>
    a{
        text-decoration: none;
        color: white;
    }
</style>

<section class="content dashboard">
    
    <div class="page-heading">
        <h1>Admin Staff List</h1>
        <ol class="breadcrumb">
            <li><a href="/admin/index">Home</a></li>
            <li class="active">admin staff list</li>
        </ol>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <button class="btn btn-info"><i class="fa fa-plus"></i> <a href="/admin/create_role">Add New</a></button>
        </div>

        <div class="panel-body">
            <div class="table-responsive">
                <table id="myTable" class="table js-exportable table-bordered">

                    <thead>
                        <tr>
                            <th>S.No</th>
                            <th>Image</th>
                            <th>User Name</th>
                            <th>Email</th>
                            <th>Password</th>
                            <th>Role Type</th>
                            <th>Mobile No</th>
                            <th>Employee No</th>
                            <th>Address</th>
                            <th>Id Proof No</th>
                            <th>Description</th>
                            <th>Created Date</th>
                            <th>Updated Date</th>
                            <th>Created By</th>
                            <th>Updated By</th>
                            <th>Status</th>
                            <th>Edit</th>
                            <!-- <th>Delete</th> -->
                        </tr>
                    </thead>
                    <tbody>
                       <% for(var i=0; i < data.length; i++) { %>
                            <tr>
                                
                            <td><%= i+1%></td>
                            <td>
                                <img src="/uploads/<%=data[i].image%>" alt="image"
                                style="height:100px;width:100px;" >
                            </td>
                            <td><%=data[i].user_name%></td>
                            <td><%=data[i].email%></td>
                            <td><%=data[i].password%></td>
                            <td><%=data[i].role_type%></td>
                            <td><%=data[i].mobile_no%></td>
                            <td><%=data[i].employee_no%></td>
                            <td><%=data[i].address%></td> 
                            <td><%=data[i].id_proof_no%></td>
                            <td><%=data[i].description%></td>
                            <td><%= new Date(data[i].createdAt).toLocaleString('en-IN', {timeZone: 'Asia/Kolkata'}) %></td> 
                            <td><%= new Date(data[i].updatedAt).toLocaleString('en-IN', {timeZone: 'Asia/Kolkata'}) %></td>
                            <td><%=data[i].createdBy%></td> 
                            <td> 
                            <% if (data[i].updatedBy) { %>
                               <%= data[i].updatedBy %>
                            <% } else { %>
                                Not Available
                            <% } %>
                            </td>  
                            <td>
                             <% if(data[i].admin_status==0) { %>
                               <a href="/admin/update_role_status/<%=data[i]._id%>"  class="btn btn-success" >Active</a>
                             <% } else { %>
                                <a href="/admin/update_role_status/<%=data[i]._id%>"  class="btn btn-danger">Deactive</a>
                              <% } %>
                            </td>

                    
                            <td>
                               <a href="/admin/edit_role/<%=data[i]._id%>" class="btn btn-primary">
                                <i class="fa fa-edit"></i>
                                </a>
                            </td>

                            <!-- <td>
                           
                            <a href ="/admin/delete_role/<%=data[i]._id%>"class="btn btn-circle  btn-sm  btn-danger" onclick="return confirmDelete(event)"><i class="fa fa-trash"></i></a>
                          
                            </td> -->
                            </tr>
                            <% } %>
                    </tbody>

                </table>
            </div>
        </div>
    </div>
    
    </div>
</section>
<%-include('./admin_footer.ejs')%>
<script>
    function confirmDelete(event) {
        if (confirm('Are you sure you want to delete this user?')) {
            // User clicked OK, allow the href to proceed
            return true;
        } else {
            // User clicked Cancel, prevent the href from proceeding
            event.preventDefault();
            return false;
        }
    }
</script>